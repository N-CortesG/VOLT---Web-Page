---
import logo from '../../public/logo.svg';
import ThemeToggle from './ThemeToggle';

const currentPath = Astro.url.pathname;
---

<header
  class="bg-background text-text-primary dark:bg-dark-background dark:text-dark-text-primary py-4 shadow-sm fixed w-full z-50"
>
  <!-- Desktop Header -->
  <div class="hidden md:flex container mx-auto px-4 justify-between items-center">
    <a href="/">
      <img src={logo.src} alt="Logo de Volt Solar Energy" class="h-12 md:h-14" />
    </a>

    <div class="flex items-center gap-6">
      <nav>
        <ul class="flex gap-2">
          <li>
            <a
              href="/"
              class={`px-4 py-2 rounded-md transition-colors duration-400 font-medium whitespace-nowrap ${currentPath === '/' ? 'bg-yellow-light text-white dark:bg-dark-yellow-light' : 'hover:bg-yellow-light/20 dark:hover:bg-dark-yellow-light/20'}`}
              >Sobre Nosotros</a
            >
          </li>
          <li>
            <a
              href="/services"
              class={`px-4 py-2 rounded-md transition-colors duration-400 font-medium whitespace-nowrap ${currentPath.startsWith('/services') ? 'bg-yellow-light text-white dark:bg-dark-yellow-light' : 'hover:bg-yellow-light/20 dark:hover:bg-dark-yellow-light/20'}`}
              >Servicios</a
            >
          </li>
          <li>
            <a
              href="/contact"
              class={`px-4 py-2 rounded-md transition-colors duration-400 font-medium whitespace-nowrap ${currentPath.startsWith('/contact') ? 'bg-yellow-light text-white dark:bg-dark-yellow-light' : 'hover:bg-yellow-light/20 dark:hover:bg-dark-yellow-light/20'}`}
              >Contacto</a
            >
          </li>
        </ul>
      </nav>
      <a
        href="/cotizar"
        class="ml-4 px-4 py-2 bg-green-dark hover:bg-green-light dark:bg-dark-green-light dark:hover:bg-dark-green-dark text-white rounded-md font-semibold transition-colors duration-300"
        >Cotiza ahora</a
      >
      <ThemeToggle client:only="react" />
    </div>
  </div>

  <!-- Mobile Header -->
  <div class="md:hidden px-4 flex items-center justify-between relative">
    <button
      class="flex items-center px-3 py-2 border rounded z-10 transition-colors duration-300
             text-text-primary border-line hover:bg-yellow-light/20
             dark:text-dark-text-primary dark:border-dark-line dark:hover:bg-dark-yellow-light/20
             bg-white dark:bg-dark-secondary"
      onclick="const menu = document.getElementById('mobile-menu'); menu.classList.toggle('hidden'); menu.classList.toggle('opacity-0'); menu.classList.toggle('translate-y-[-10px]')"
    >
      <svg class="fill-current h-4 w-4" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
        <title>Menu</title>
        <path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path>
      </svg>
    </button>

    <a href="/" class="mx-auto">
      <img src={logo.src} alt="Logo de Volt Solar Energy" class="h-12" />
    </a>
  </div>

  <!-- Mobile Menu Overlay -->
  <div
    id="mobile-menu"
    class="fixed top-[64px] left-0 right-0 bg-background dark:bg-dark-background px-4 py-6 hidden opacity-0 translate-y-[-10px] transition-all duration-300 ease-in-out z-40"
  >
    <nav>
      <ul class="flex flex-col gap-3">
        <li>
          <a
            href="/"
            onclick="document.getElementById('mobile-menu').classList.add('hidden', 'opacity-0', 'translate-y-[-10px]')"
            class="block px-4 py-2 rounded-md hover:bg-yellow-light/20 dark:hover:bg-dark-yellow-light/20"
            >Sobre Nosotros</a
          >
        </li>
        <li>
          <a
            href="/services"
            onclick="document.getElementById('mobile-menu').classList.add('hidden', 'opacity-0', 'translate-y-[-10px]')"
            class="block px-4 py-2 rounded-md hover:bg-yellow-light/20 dark:hover:bg-dark-yellow-light/20"
            >Servicios</a
          >
        </li>
        <li>
          <a
            href="/contact"
            onclick="document.getElementById('mobile-menu').classList.add('hidden', 'opacity-0', 'translate-y-[-10px]')"
            class="block px-4 py-2 rounded-md hover:bg-yellow-light/20 dark:hover:bg-dark-yellow-light/20"
            >Contacto</a
          >
        </li>
        <li>
          <a
            href="/cotizar"
            onclick="document.getElementById('mobile-menu').classList.add('hidden', 'opacity-0', 'translate-y-[-10px]')"
            class="block px-4 py-2 bg-green-light hover:bg-green-dark dark:bg-dark-green-light dark:hover:bg-dark-green-dark text-white rounded-md text-center"
            >Cotiza ahora</a
          >
        </li>
        <li>
          <div class="flex justify-center pt-2">
            <ThemeToggle client:only="react" />
          </div>
        </li>
      </ul>
    </nav>
  </div>
</header>
