---
const { lang, class: customClass = '' } = Astro.props;

const currentPath = Astro.url.pathname;
const pathWithoutLang = currentPath.replace(/^\/(es|en)/, '') || '/';

const toES = `/es${pathWithoutLang}`;
const toEN = `/en${pathWithoutLang}`;
---

<div
  class={`inline-flex rounded-full overflow-hidden border border-line dark:border-dark-line ${customClass}`}
>
  <a
    href={toES}
    aria-current={lang === 'es' ? 'page' : undefined}
    onclick="localStorage.setItem('preferredLang', 'es')"
    class={`px-4 py-1 text-sm font-medium transition-colors duration-200 ${
      lang === 'es'
        ? 'bg-green-dark text-white dark:bg-dark-green-dark'
        : 'bg-background text-text-primary dark:bg-dark-background dark:text-dark-text-primary hover:bg-green-light/10 dark:hover:bg-dark-green-light/10'
    }`}
  >
    ES
  </a>

  <a
    href={toEN}
    aria-current={lang === 'en' ? 'page' : undefined}
    onclick="localStorage.setItem('preferredLang', 'en')"
    class={`px-4 py-1 text-sm font-medium transition-colors duration-200 ${
      lang === 'en'
        ? 'bg-green-dark text-white dark:bg-dark-green-dark'
        : 'bg-background text-text-primary dark:bg-dark-background dark:text-dark-text-primary hover:bg-green-light/10 dark:hover:bg-dark-green-light/10'
    }`}
  >
    EN
  </a>
</div>
